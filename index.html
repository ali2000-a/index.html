<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø·Ø§Ù„Ø¨ Ø§Ù„Ø´Ø§Ù…Ù„Ø© - Ali SAJAD</title>
    <style>
        body { font-family: 'Segoe UI', Tahoma, sans-serif; background: #f4f7f6; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        
        .tabs { display: flex; gap: 10px; margin-bottom: 20px; width: 100%; max-width: 900px; }
        .tab-btn { flex: 1; padding: 12px; border: none; border-radius: 10px; cursor: pointer; background: #ddd; font-weight: bold; font-size: 16px; transition: 0.3s; color: #555; }
        .tab-btn.active { background: #27ae60; color: white; box-shadow: 0 4px 10px rgba(39, 174, 96, 0.3); }

        .card { background: white; padding: 25px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); width: 100%; max-width: 900px; display: none; }
        .card.active { display: block; animation: fadeIn 0.5s; }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h2 { color: #2c3e50; text-align: center; border-bottom: 3px solid #27ae60; padding-bottom: 10px; }
        .table-container { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ddd; padding: 10px; text-align: center; }
        th { background: #27ae60; color: white; }
        input { width: 60px; padding: 5px; border: 1px solid #ccc; border-radius: 4px; text-align: center; }
        
        /* ØªÙ…ÙŠÙŠØ² Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© */
        .optional-row { background-color: #f9f9f9; color: #666; }
        .optional-tag { font-size: 10px; color: #e67e22; display: block; }

        .btn-group { display: flex; gap: 10px; margin-top: 20px; }
        button.action-btn { flex: 1; padding: 12px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; transition: 0.3s; }
        .calc-btn { background: #27ae60; color: white; }
        .reset-btn { background: #95a5a6; color: white; }
        
        #finalResult, #termResult { margin-top: 20px; padding: 20px; border-radius: 10px; text-align: center; font-size: 20px; display: none; }
        .success { background: #d4edda; color: #155724; border: 2px solid #c3e6cb; }
        .fail { background: #f8d7da; color: #721c24; border: 2px solid #f5c6cb; }
        .footer { text-align: center; margin-top: 30px; font-weight: bold; color: #555; border-top: 1px solid #eee; padding-top: 15px; }
    </style>
</head>
<body>

    <div class="tabs">
        <button class="tab-btn active" onclick="switchTab('efaTab', this)">Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¥Ø¹ÙØ§Ø¡</button>
        <button class="tab-btn" onclick="switchTab('termTab', this)">Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„</button>
    </div>

    <div id="efaTab" class="card active">
        <h2>ğŸ“ Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¥Ø¹ÙØ§Ø¡ Ø§Ù„Ø¹Ø§Ù…</h2>
        <p style="text-align: center; color: #666;">Ø§ØªØ±Ùƒ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ Ù„Ù… ØªØ¯Ø±Ø³ÙˆÙ‡Ø§ ÙØ§Ø±ØºØ©:</p>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                        <th>ÙØµÙ„ 1</th>
                        <th>Ù†ØµÙ Ø³Ù†Ø©</th>
                        <th>ÙØµÙ„ 2</th>
                        <th>Ø§Ù„Ø³Ø¹ÙŠ Ø§Ù„Ø³Ù†ÙˆÙŠ</th>
                    </tr>
                </thead>
                <tbody id="tableBody"></tbody>
            </table>
        </div>
        <div class="btn-group">
            <button class="action-btn calc-btn" onclick="checkExemption()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©</button>
            <button class="action-btn reset-btn" onclick="resetAll()">Ù…Ø³Ø­ Ø§Ù„ÙƒÙ„</button>
        </div>
        <div id="finalResult"></div>
        <div class="footer">ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ù…Ù† Ù‚Ø¨Ù„ <span style="color: #27ae60;">Ali SAJAD</span></div>
    </div>

    <div id="termTab" class="card">
        <h2>ğŸ“Š Ø­Ø§Ø³Ø¨Ø© Ù…Ø¹Ø¯Ù„ Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„</h2>
        <p style="text-align: center; color: #666;">Ø§ØªØ±Ùƒ Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„ØªÙŠ Ù„Ù… ØªØ¯Ø±Ø³ÙˆÙ‡Ø§ ÙØ§Ø±ØºØ©:</p>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ù„Ù…Ø§Ø¯Ø©</th>
                        <th>Ø¯Ø±Ø¬Ø© Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„</th>
                    </tr>
                </thead>
                <tbody id="termTableBody"></tbody>
            </table>
        </div>
        <div class="btn-group">
            <button class="action-btn calc-btn" onclick="calculateTermAverage()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ù…Ø¹Ø¯Ù„</button>
            <button class="action-btn reset-btn" onclick="resetTerm()">Ù…Ø³Ø­</button>
        </div>
        <div id="termResult"></div>
        <div class="footer">ØªÙ… ØªØ·ÙˆÙŠØ±Ù‡ Ù…Ù† Ù‚Ø¨Ù„ <span style="color: #27ae60;">Ali SAJAD</span></div>
    </div>

<script>
    // Ø§Ù„Ù…ÙˆØ§Ø¯ Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© ÙˆØ§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© Ø§Ù„Ù…Ø¯Ù…Ø¬Ø©
    const allSubjects = [
        { name: "Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", optional: false },
        { name: "Ø¹Ø±Ø¨ÙŠ", optional: false },
        { name: "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", optional: false },
        { name: "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", optional: false },
        { name: "ÙƒÙŠÙ…ÙŠØ§Ø¡", optional: false },
        { name: "ÙÙŠØ²ÙŠØ§Ø¡", optional: false },
        { name: "Ø£Ø­ÙŠØ§Ø¡", optional: false },
        { name: "Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ§Øª", optional: true },
        { name: "Ø­Ø§Ø³ÙˆØ¨", optional: true },
        { name: "ÙÙ†ÙŠØ©", optional: true },
        { name: "Ø±ÙŠØ§Ø¶Ø©", optional: true },
        { name: "ÙƒØ±Ø¯ÙŠØ©", optional: true },
        { name: "ÙØ±Ù†Ø³ÙŠØ©", optional: true }
    ];

    function initTables() {
        // Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¥Ø¹ÙØ§Ø¡
        const tbody = document.getElementById('tableBody');
        tbody.innerHTML = allSubjects.map((s, i) => `
            <tr class="${s.optional ? 'optional-row' : ''}">
                <td>${s.name} ${s.optional ? '<span class="optional-tag">(Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</span>' : ''}</td>
                <td><input type="number" id="f1-${i}" min="0" max="100"></td>
                <td><input type="number" id="mid-${i}" min="0" max="100"></td>
                <td><input type="number" id="f2-${i}" min="0" max="100"></td>
                <td id="saei-${i}" style="font-weight:bold; background:#f9f9f9;">-</td>
            </tr>
        `).join('');

        // Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„
        const tTermBody = document.getElementById('termTableBody');
        tTermBody.innerHTML = allSubjects.map((s, i) => `
            <tr class="${s.optional ? 'optional-row' : ''}">
                <td>${s.name} ${s.optional ? '<span class="optional-tag">(Ø§Ø®ØªÙŠØ§Ø±ÙŠ)</span>' : ''}</td>
                <td><input type="number" class="term-input" id="t-${i}" min="0" max="100"></td>
            </tr>
        `).join('');
    }

    function switchTab(tabId, btn) {
        document.querySelectorAll('.card').forEach(c => c.classList.remove('active'));
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        btn.classList.add('active');
    }

    function checkExemption() {
        let totalSaei = 0;
        let minSaei = 100;
        let count = 0;

        for(let i=0; i<allSubjects.length; i++) {
            let f1 = document.getElementById(`f1-${i}`).value;
            let mid = document.getElementById(`mid-${i}`).value;
            let f2 = document.getElementById(`f2-${i}`).value;

            // Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ø®ØªÙŠØ§Ø±ÙŠØ© ÙˆÙØ§Ø±ØºØ©ØŒ Ù†ØªØ®Ø·Ø§Ù‡Ø§
            if (allSubjects[i].optional && f1==="" && mid==="" && f2==="") {
                document.getElementById(`saei-${i}`).innerText = "-";
                continue;
            }

            let v1 = parseFloat(f1) || 0;
            let v2 = parseFloat(mid) || 0;
            let v3 = parseFloat(f2) || 0;

            let saei = Math.round((v1 + v2 + v3) / 3);
            document.getElementById(`saei-${i}`).innerText = saei;

            totalSaei += saei;
            if(saei < minSaei) minSaei = saei;
            count++;
        }

        if (count === 0) return;

        let average = (totalSaei / count).toFixed(1);
        const resultDiv = document.getElementById('finalResult');
        resultDiv.style.display = 'block';

        if (average >= 85 && minSaei >= 75) {
            resultDiv.className = 'success';
            resultDiv.innerHTML = `ğŸ¥³ Ù…Ø¨Ø±ÙˆÙƒ! Ù…Ø¹Ø¯Ù„Ùƒ Ù„Ù€ (${count}) Ù…ÙˆØ§Ø¯ Ù‡Ùˆ <b>${average}</b><br>Ù„Ù‚Ø¯ Ø´Ù…Ù„Ùƒ Ø§Ù„Ø¥Ø¹ÙØ§Ø¡ Ø§Ù„Ø¹Ø§Ù…!`;
        } else {
            resultDiv.className = 'fail';
            resultDiv.innerHTML = `Ù…Ø¹Ø¯Ù„Ùƒ Ø§Ù„Ø¹Ø§Ù… Ù‡Ùˆ <b>${average}</b>. Ø§Ù„Ø³Ø¹ÙŠ Ø§Ù„Ø£Ù‚Ù„: <b>${minSaei}</b><br>Ù„Ø§ ÙŠØ´Ù…Ù„Ùƒ Ø§Ù„Ø¥Ø¹ÙØ§Ø¡ Ø§Ù„Ø¹Ø§Ù… (Ø§Ù„Ù…Ø¹Ø¯Ù„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨ 85 ÙˆØ§Ù„Ø£Ù‚Ù„ 75).`;
        }
    }

    function calculateTermAverage() {
        let inputs = document.querySelectorAll('.term-input');
        let total = 0, count = 0;
        
        inputs.forEach(input => {
            let val = parseFloat(input.value);
            if (!isNaN(val)) {
                total += val;
                count++;
            }
        });

        const resDiv = document.getElementById('termResult');
        resDiv.style.display = 'block';

        if (count > 0) {
            let avg = (total / count).toFixed(2);
            resDiv.className = 'success';
            resDiv.innerHTML = `Ù…Ø¹Ø¯Ù„Ùƒ Ù„Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„ (Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ ${count} Ù…ÙˆØ§Ø¯) Ù‡Ùˆ: <b>${avg}</b>`;
        } else {
            resDiv.className = 'fail';
            resDiv.innerHTML = "ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø¯Ø±Ø¬Ø© Ù…Ø§Ø¯Ø© ÙˆØ§Ø­Ø¯Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø£Ù‚Ù„.";
        }
    }

    function resetAll() { initTables(); document.getElementById('finalResult').style.display = 'none'; }
    function resetTerm() { initTables(); document.getElementById('termResult').style.display = 'none'; }

    initTables();
</script>
</body>
</html>
